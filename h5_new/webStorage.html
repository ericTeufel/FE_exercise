<!DOCTYPE html>
<html lang="en">
<head>
  <title>webStorage</title>
  <meta charset="utf-8">
  <style type="text/css">
    textarea{
      width: 500px;
      height: 200px;
    }
  </style>
</head>
<body>
  <div>
    <h2>简单的web存储留言板</h2>
    <textarea id="t1"></textarea>
    <br>
    <input type="button" class="button" onclick="addInfo()" value="留言">
    <input type="button" class="button" onclick="cleanInfo()" value="清除留言">
    <br>
    <hr>
    <textarea id="show" readonly></textarea>

  </div>


  <script type="text/javascript">
//使用html5web存储的sessionStorage方式编写一个web页面
//功能是一个建议的web留言板 信息可以永久保存 并能清除留言板内容
//添加留言信息
function addInfo(){
  var info = document.getElementById('t1');//将localStorage替换为sessionStorage即sessionStorage 浏览器关闭后删除
  var lStorage = window.localStorage;//获取localStorage对象
//判断对象中是否有myBoard对象
if (lStorage.myBoard) {
  var date = new Date();
      //获取原先键所对应的值再加上文本框中所输入的留言信息 也就是说 键所对应的值做累加
      lStorage.myBoard+=t1.value+"\n发表时间:"+date.toLocaleString()+"\n";
    } else {
     var date = new Date();
     lStorage.myBoard=t1.value+"\n发表时间:"+date.toLocaleString()+"\n";
   }
   showInfo();
 }
//清除留言信息
function cleanInfo(){
  window.localStorage.removeItem('myBoard');
  showInfo();
}
//取出信息
function showInfo(){
  var lStorage = window.localStorage;
  if (window.localStorage.myBoard) {
    show.value = window.localStorage.getItem('myBoard');
  } else {
    show.value='No Message';
  }
}
</script>
</body>
</html>
